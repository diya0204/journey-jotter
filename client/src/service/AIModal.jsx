import { GoogleGenerativeAI } from "@google/generative-ai";
const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",});
  const generationConfig= {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };


   export const chatSession = model.startChat({
    generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {text: "Generate a detailed travel itinerary for a trip to {location} for {totalDays} days for {traveler} with a budget of {budget}. The itinerary should be structured day-wise and customized based on the selected pace ({pace}: relaxed, fast-paced, balanced), number of people, and special considerations like pet-friendliness ({petFriendly}: yes/no) and interest in thrill activities ({thrillActivities}: yes/no). The plan should include:\\\\n\\\\n1. Accommodation Details\\\\n all Hotel Name according to budget\\\\nHotel Address\\\\nHotel Price per night (based on budget)\\\\nHotel Image URL\\\\nGeo-coordinates\\\\nHotel Rating and Reviews\\\\nBrief Description of Amenities\\\\n2. Day-Wise Itinerary (Highly Detailed)\\\\nFor each day, provide:\\\\n\\\\nAttractions & Activities:\\\\nPlace Name\\\\nDescription of the place and why it’s worth visiting\\\\nHigh-quality Image URL of the place\\\\nGeo-coordinates\\\\nTicket Pricing (if applicable)\\\\nEstimated Time Required for Visit\\\\nTravel Details Between Locations:\\\\nMode of Transport (walk, taxi, bus, train, rental car, etc.)\\\\nEstimated Travel Time\\\\nTravel Cost\\\\n3. Food & Dining Recommendations\\\\nRestaurant Name\\\\nType of Cuisine\\\\nApproximate Price per Meal (as per budget)\\\\nGeo-coordinates\\\\nReviews & Ratings\\\\nImage URL (if available)\\\\n4. Live Events & Local Experiences (If Available for Travel Dates)\\\\nEvent Name\\\\nEvent Details & Description\\\\nVenue Name & Address\\\\nEvent Date & Time\\\\nTicket Price (if applicable)\\\\nEvent Image URL\\\\nGeo-coordinates\\\\n5. Adventure & Thrill Activities (If Selected)\\\\nActivity Name\\\\nDescription of the Experience\\\\nExact Location & Geo-coordinates\\\\nPrice & Booking Information\\\\nSafety Considerations\\\\n6.{ Shopping & Local Souvenirs} (If Selected)\\\\nLocal Markets and Shops\\\\nBest Souvenirs to Buy\\\\nEstimated Prices\\\\nGeo-coordinates\\\\n7. Additional Considerations:\\\\nPet-Friendly Spots (If pet-friendly option is selected)\\\\nKid-Friendly Attractions (If applicable)\\\\nWheelchair Accessibility Information (If needed)\\\\nReturn the response in JSON format, ensuring high accuracy and completeness. Make sure the itinerary is structured logically based on the selected pace and budget constraints.\\\\n\\\\n\\\"}, Create the itenary such that 5-6 hotels could be generated along with everuy other detail according to the budget . give this in json format and it should be generated in a way which is easier to store in firebase and get it displayed in wensite in json"},
      ],
    },
    {
      role: "model",
      parts: [
        {text: "Okay, I will generate a detailed travel itinerary in JSON format based on your specifications.  Please provide the values for the following placeholders so I can customize the itinerary:\n\n*   `location`: (e.g., \"Paris\", \"Tokyo\", \"Rome\")\n*   `totalDays`: (e.g., 7, 10, 5)\n*   `traveler`: (e.g., \"solo traveler\", \"couple\", \"family with two kids\")\n*   `budget`: (e.g., \"luxury\", \"mid-range\", \"budget\")\n*   `pace`: (e.g., \"relaxed\", \"fast-paced\", \"balanced\")\n*   `petFriendly`: (e.g., \"yes\", \"no\")\n*   `thrillActivities`: (e.g., \"yes\", \"no\")\n\nOnce you provide these values, I will generate the JSON itinerary.\n\n```json\n{\n  \"tripDetails\": {\n    \"location\": \"{location}\",\n    \"totalDays\": \"{totalDays}\",\n    \"traveler\": \"{traveler}\",\n    \"budget\": \"{budget}\",\n    \"pace\": \"{pace}\",\n    \"petFriendly\": \"{petFriendly}\",\n    \"thrillActivities\": \"{thrillActivities}\"\n  },\n  \"accommodations\": [\n    {\n      \"hotelName\": \"Hotel Option 1\",\n      \"hotelAddress\": \"Address of Hotel 1\",\n      \"pricePerNight\": 100,\n      \"imageURL\": \"URL of Hotel 1 Image\",\n      \"geoCoordinates\": {\n        \"latitude\": 0.00000,\n        \"longitude\": 0.00000\n      },\n      \"rating\": 4.5,\n      \"reviews\": \"Link to Reviews\",\n      \"amenities\": \"Free Wi-Fi, Breakfast Included\",\n       \"description\": \"A cozy hotel located near the city center.\"\n    },\n    {\n      \"hotelName\": \"Hotel Option 2\",\n      \"hotelAddress\": \"Address of Hotel 2\",\n      \"pricePerNight\": 150,\n      \"imageURL\": \"URL of Hotel 2 Image\",\n      \"geoCoordinates\": {\n        \"latitude\": 0.00000,\n        \"longitude\": 0.00000\n      },\n      \"rating\": 4.0,\n      \"reviews\": \"Link to Reviews\",\n      \"amenities\": \"Swimming pool, Restaurant\",\n       \"description\": \"A modern hotel with great facilities.\"\n    },\n    {\n     \"hotelName\": \"Hotel Option 3\",\n      \"hotelAddress\": \"Address of Hotel 3\",\n      \"pricePerNight\": 80,\n      \"imageURL\": \"URL of Hotel 3 Image\",\n      \"geoCoordinates\": {\n        \"latitude\": 0.00000,\n        \"longitude\": 0.00000\n      },\n      \"rating\": 3.5,\n      \"reviews\": \"Link to Reviews\",\n      \"amenities\": \"Free Wi-Fi, Basic Amenities\",\n      \"description\": \"Budget-friendly hotel with a convenient location.\"\n    },\n     {\n      \"hotelName\": \"Hotel Option 4\",\n      \"hotelAddress\": \"Address of Hotel 4\",\n      \"pricePerNight\": 120,\n      \"imageURL\": \"URL of Hotel 4 Image\",\n      \"geoCoordinates\": {\n        \"latitude\": 0.00000,\n        \"longitude\": 0.00000\n      },\n      \"rating\": 4.2,\n      \"reviews\": \"Link to Reviews\",\n      \"amenities\": \"Spa, Fitness Center\",\n       \"description\": \"A relaxing hotel with excellent service.\"\n    },\n     {\n      \"hotelName\": \"Hotel Option 5\",\n      \"hotelAddress\": \"Address of Hotel 5\",\n      \"pricePerNight\": 90,\n      \"imageURL\": \"URL of Hotel 5 Image\",\n      \"geoCoordinates\": {\n        \"latitude\": 0.00000,\n        \"longitude\": 0.00000\n      },\n      \"rating\": 3.8,\n      \"reviews\": \"Link to Reviews\",\n      \"amenities\": \"Breakfast, Parking\",\n       \"description\": \"A comfortable hotel suitable for families.\"\n    },\n       {\n      \"hotelName\": \"Hotel Option 6\",\n      \"hotelAddress\": \"Address of Hotel 6\",\n      \"pricePerNight\": 160,\n      \"imageURL\": \"URL of Hotel 6 Image\",\n      \"geoCoordinates\": {\n        \"latitude\": 0.00000,\n        \"longitude\": 0.00000\n      },\n      \"rating\": 4.7,\n      \"reviews\": \"Link to Reviews\",\n      \"amenities\": \"Luxury Suites, Fine Dining\",\n       \"description\": \"An upscale hotel for a luxurious experience.\"\n    }\n\n  ],\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"theme\": \"Arrival and City Exploration\",\n      \"attractions\": [\n        {\n          \"placeName\": \"Eiffel Tower\",\n          \"description\": \"Iconic Parisian landmark offering panoramic views of the city.\",\n          \"imageURL\": \"URL of Eiffel Tower Image\",\n          \"geoCoordinates\": {\n            \"latitude\": 0.00000,\n            \"longitude\": 0.00000\n          },\n          \"ticketPricing\": 26.80,\n          \"estimatedTime\": \"3-4 hours\"\n        }\n      ],\n        \"travelDetails\": [\n        {\n          \"from\": \"Hotel\",\n          \"to\": \"Eiffel Tower\",\n          \"modeOfTransport\": \"Taxi\",\n          \"estimatedTime\": \"20 minutes\",\n          \"travelCost\": 20\n        }\n      ],\n        \"food\": [\n        {\n          \"restaurantName\": \"Le Jules Verne\",\n          \"cuisine\": \"French\",\n          \"approxPricePerMeal\": 150,\n          \"geoCoordinates\": {\n            \"latitude\": 0.00000,\n            \"longitude\": 0.00000\n          },\n          \"reviews\": \"Link to Reviews\",\n          \"imageURL\": \"URL of Restaurant Image\"\n        }\n      ],\n            \"liveEvents\": [\n        {\n          \"eventName\": \"Local Music Show\",\n          \"eventDetails\": \"Live music performance at a local venue.\",\n          \"venueName\": \"Venue Name\",\n          \"venueAddress\": \"Venue Address\",\n          \"eventDate\": \"Date\",\n          \"eventTime\": \"Time\",\n          \"ticketPrice\": 25,\n          \"eventImageURL\": \"URL of Event Image\",\n          \"geoCoordinates\": {\n            \"latitude\": 0.00000,\n            \"longitude\": 0.00000\n          }\n        }\n      ],\n        \"adventure\": [\n        {\n          \"activityName\": \"Bungee Jumping\",\n          \"description\": \"Experience the thrill of bungee jumping.\",\n          \"exactLocation\": \"Location of Bungee Jumping\",\n          \"geoCoordinates\": {\n            \"latitude\": 0.00000,\n            \"longitude\": 0.00000\n          },\n          \"priceAndBooking\": \"Price and Booking Information\",\n          \"safetyConsiderations\": \"Safety Guidelines\"\n        }\n      ],\n        \"shopping\": [\n        {\n          \"marketName\": \"Local Market\",\n          \"bestSouvenirs\": \"Local Handicrafts\",\n          \"estimatedPrices\": \"Variable\",\n          \"geoCoordinates\": {\n            \"latitude\": 0.00000,\n            \"longitude\": 0.00000\n          }\n        }\n      ],\n       \"additionalConsiderations\": {\n            \"petFriendlySpots\": \"List of Pet-Friendly Parks\",\n            \"kidFriendlyAttractions\": \"List of Kid-Friendly Museums\",\n            \"wheelchairAccessibility\": \"Information on Accessibility\"\n        }\n    },\n    {\n      \"day\": 2,\n      \"theme\": \"Museums and Art\",\n      \"attractions\": [\n        {\n          \"placeName\": \"Louvre Museum\",\n          \"description\": \"One of the world's largest and most famous museums.\",\n          \"imageURL\": \"URL of Louvre Image\",\n          \"geoCoordinates\": {\n            \"latitude\": 0.00000,\n            \"longitude\": 0.00000\n          },\n          \"ticketPricing\": 17,\n          \"estimatedTime\": \"4-5 hours\"\n        }\n      ],\n      \"travelDetails\": [\n        {\n          \"from\": \"Eiffel Tower\",\n          \"to\": \"Louvre Museum\",\n          \"modeOfTransport\": \"Metro\",\n          \"estimatedTime\": \"30 minutes\",\n          \"travelCost\": 2.10\n        }\n      ],\n       \"food\": [\n        {\n          \"restaurantName\": \"Angelina\",\n          \"cuisine\": \"Café\",\n          \"approxPricePerMeal\": 30,\n          \"geoCoordinates\": {\n            \"latitude\": 0.00000,\n            \"longitude\": 0.00000\n          },\n          \"reviews\": \"Link to Reviews\",\n          \"imageURL\": \"URL of Restaurant Image\"\n        }\n      ],\n            \"liveEvents\": [\n        {\n          \"eventName\": \"Local Music Show\",\n          \"eventDetails\": \"Live music performance at a local venue.\",\n          \"venueName\": \"Venue Name\",\n          \"venueAddress\": \"Venue Address\",\n          \"eventDate\": \"Date\",\n          \"eventTime\": \"Time\",\n          \"ticketPrice\": 25,\n          \"eventImageURL\": \"URL of Event Image\",\n          \"geoCoordinates\": {\n            \"latitude\": 0.00000,\n            \"longitude\": 0.00000\n          }\n        }\n      ],\n        \"adventure\": [\n        {\n          \"activityName\": \"Bungee Jumping\",\n          \"description\": \"Experience the thrill of bungee jumping.\",\n          \"exactLocation\": \"Location of Bungee Jumping\",\n          \"geoCoordinates\": {\n            \"latitude\": 0.00000,\n            \"longitude\": 0.00000\n          },\n          \"priceAndBooking\": \"Price and Booking Information\",\n          \"safetyConsiderations\": \"Safety Guidelines\"\n        }\n      ],\n        \"shopping\": [\n        {\n          \"marketName\": \"Local Market\",\n          \"bestSouvenirs\": \"Local Handicrafts\",\n          \"estimatedPrices\": \"Variable\",\n          \"geoCoordinates\": {\n            \"latitude\": 0.00000,\n            \"longitude\": 0.00000\n          }\n        }\n      ],\n       \"additionalConsiderations\": {\n            \"petFriendlySpots\": \"List of Pet-Friendly Parks\",\n            \"kidFriendlyAttractions\": \"List of Kid-Friendly Museums\",\n            \"wheelchairAccessibility\": \"Information on Accessibility\"\n        }\n    }\n  ]\n}\n```\n\n**Explanation and Firebase Considerations:**\n\n1.  **Structure:** The JSON is structured with a root object containing `tripDetails`, `accommodations`, and `itinerary`. This makes it easily traversable.\n2.  **Arrays vs. Objects:**  Arrays are used for lists of accommodations, itinerary days, attractions, etc.  Objects are used for individual entities like a specific hotel, restaurant, or attraction.\n3.  **Geo-Coordinates:**  Geo-coordinates are stored in a separate object within each location, restaurant, or event.  This allows for easy mapping integration.\n4.  **URLs:**  Image URLs are stored directly within the relevant object.\n5.  **Firebase Compatibility:**  This structure is designed to be easily stored and retrieved from Firebase.\n\n    *   **Root-Level Keys:** Firebase supports root-level keys (e.g., `tripDetails`, `accommodations`, `itinerary`).\n    *   **Nested Objects:**  Firebase handles nested objects and arrays seamlessly.\n    *   **No Circular References:** The JSON avoids circular references, which would cause issues in Firebase.\n\n6.  **Dynamic Data:**  Placeholder strings are used for the actual values (e.g., `\"{location}\"`, `\"URL of Hotel 1 Image\"`). These placeholders will be replaced with the appropriate data when you provide it.\n\n**How to Use in a Website (Simplified Example):**\n\n1.  **Fetch from Firebase:** Use the Firebase SDK to retrieve the JSON data.\n2.  **Parse JSON:** Convert the JSON string received from Firebase into a JavaScript object.\n3.  **Iterate and Display:**\n    *   Use `forEach` or a `for` loop to iterate through the `accommodations` array and display hotel details.\n    *   Use `forEach` or a `for` loop to iterate through the `itinerary` array and display the day-wise plan.  Within each day, iterate through `attractions`, `food`, etc., to display the details.\n    *   Use the image URLs to display images.\n    *   Use the geo-coordinates to integrate with a map library (e.g., Google Maps, Leaflet) to show locations on a map.\n    *   Display ratings, reviews, prices, and other relevant information.\n\n**Important Notes:**\n\n*   **Replace Placeholders:**  Remember to replace all the placeholder values with actual data.\n*   **Real URLs:** Use valid and accessible URLs for images.\n*   **Error Handling:** Implement error handling when fetching data from Firebase and displaying it on your website.\n*   **Security:** Secure your Firebase database with appropriate security rules.\n*   **Firebase SDK:**  You'll need to include the Firebase JavaScript SDK in your website.\n*   **Map Library:** You'll need to include a map library like Google Maps if you want to display locations on a map.\n*   **Styling:** Use CSS to style the data and make it visually appealing on your website.\n*   **Data Cleaning:** Before displaying data from Firebase, sanitize it to prevent cross-site scripting (XSS) vulnerabilities.  Escape HTML entities.\n\nThis structured JSON response should be well-suited for storage in Firebase and retrieval and display in a website. Just remember to fill in the placeholder values and integrate it with your Firebase and website code.  I'm ready to generate the complete JSON once you provide the specific details for your trip.\n"},
        ],
      },
    ],
  });